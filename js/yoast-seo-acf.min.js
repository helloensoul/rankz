!function(t){var e;jQuery.expr[":"].parents=function(t,e,n){return jQuery(t).parents(n[3]).length<1};var n=function(){this.content={},this.pluginName="acfPlugin"};n.prototype.setContent=function(e){("INPUT"==e.prop("nodeName")||"TEXTAREA"==e.prop("nodeName"))&&(e=e.closest("div[data-name]"));var n=e.find("label").first().attr("for"),o=e.data("type"),i=null;switch(o){case"text":i=e.find("input").val();break;case"image":i=e.find("img[src!='']").prop("outerHTML");break;case"gallery":i="",e.find("div.thumbnail > img").each(function(){i+=t(this).prop("outerHTML")});break;case"wysiwyg":i=e.find("textarea").val();break;default:i=null}return null!==i&&(this.content[n]=i,YoastSEO.app.pluginReloaded(this.pluginName)),!0},n.prototype.removeContent=function(e){var n=this;console.log("removeContent",this.content),setTimeout(function(){t.each(n.content,function(e,o){0==t('label[for="'+e+'"]').filter(":parents(.clones)").length&&delete n.content[e]}),YoastSEO.app.pluginReloaded(n.pluginName)},600)},n.prototype.registerPlugin=function(){YoastSEO.app.registerPlugin(this.pluginName,{status:"ready"})},n.prototype.registerModifications=function(){YoastSEO.app.registerModification("content",this.addAcfDataToContent.bind(this),this.pluginName,10)},n.prototype.addAcfDataToContent=function(e){return 0==this.content.length?e:(t.each(this.content,function(t,n){e+=n}),e)},t(window).on("YoastSEO:ready",function(){e=new n,e.registerPlugin(),e.registerModifications(),acf.add_action("load_field",e.setContent.bind(e)),acf.add_action("change",e.setContent.bind(e)),acf.add_action("remove",e.removeContent.bind(e))})}(jQuery);
